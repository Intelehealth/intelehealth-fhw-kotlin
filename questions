1. What is the use of device info?

Visit
Total = 314
completed = 102
prescription = 97
completed + pres = 172
172 - 97 = 75
314 - 212 = 102

102 + 115 + 97 = 314


// Received prescription count query
SELECT
sum(completed) as completed,
sum(received) as received,
sum(pending) as pending,
sum(total) as total from (SELECT
CASE WHEN custom.product_category = "Completed" then custom.total END as completed,
CASE WHEN custom.product_category = "Received"  then custom.total END as received,
CASE WHEN custom.product_category = "Pending" then custom.total END as pending, total from
(SELECT
    CASE
        WHEN uuid in (select visituuid from tbl_encounter where encounter_type_uuid = "629a9d0b-48eb-405e-953d-a5964c88dc30") THEN 'Completed'
        WHEN uuid in (select visituuid from tbl_encounter where encounter_type_uuid = "bd1fbfaa-f5fb-4ebd-b75c-564506fc309e") THEN  'Received'
        WHEN uuid not in (select visituuid from tbl_encounter where encounter_type_uuid = "629a9d0b-48eb-405e-953d-a5964c88dc30") THEN  'Pending'
    END AS product_category,
    count(uuid) AS total
FROM tbl_visit
GROUP BY product_category) as custom);